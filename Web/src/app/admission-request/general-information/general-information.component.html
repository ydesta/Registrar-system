<!-- Save Button Loading State - Only affects the save button, not the entire page -->
<div *ngIf="saveLoading" class="save-loading-indicator">
    <div class="loading-content">
        <div class="loading-spinner"></div>
        <p class="loading-text">Saving...</p>
    </div>
</div>

<app-admission-tabs [(selectedTabIndex)]="selectedTabIndex" [isTabDisabled]="isTabDisabled"
    [showSave]="selectedTabIndex === 1" [showSubmit]="selectedTabIndex === 7" [isLastTab]="selectedTabIndex === 7"
    [saveDisabled]="isSaveButtonDisabled" [saveLoading]="saveLoading" [submitDisabled]="isSubmitButtonDisabled"
    [nextDisabled]="isNextButtonDisabled()" [tabOrder]="'default'" [academicProgramValid]="isAcademicProgramValid"
    (nextTabClicked)="nextTab()" (previousTabClicked)="previousTab()" (saveClicked)="submitForm()"
    (submitClicked)="onApplicanFormSubmit()">

    <div tabContent="instruction">
        <app-instruction></app-instruction>
    </div>

    <div tabContent="generalInfo">
        <form nz-form [formGroup]="form" [class.form-processing]="saveLoading">
            <div class="form-container" [class.form-saving]="saveLoading">
                <!-- Form saving indicator -->
                <div *ngIf="saveLoading" class="form-saving-indicator">
                    <div class="saving-content">
                        <span nz-icon nzType="loading" nzSpin="true"></span>
                        <span>Saving form data...</span>
                    </div>
                </div>

                <!-- Form success indicator -->
                <div *ngIf="saveSuccess" class="form-success-indicator">
                    <div class="success-content">
                        <span nz-icon nzType="check-circle" nzTheme="fill"></span>
                        <span>Form saved successfully!</span>
                    </div>
                </div>
                <!-- Profile Picture Section -->
                <div class="profile-section">
                    <div class="section-header-wrapper">
                        <div class="header-icon">
                            <i nz-icon nzType="user" nzTheme="outline"></i>
                        </div>
                        <div class="header-content">
                            <h3 class="section-title">Profile Picture <span style="color: red;">*</span></h3>
                            <p class="section-subtitle">Upload a professional photo for your application</p>
                        </div>
                    </div>

                    <div class="profile-container">
                        <div class="profile-image-wrapper">
                            <div class="profile-image-container">
                                <img *ngIf="!profilePicture" src="./../../../assets/images/profile.png"
                                    class="profile-image" alt="Default Profile" />
                                <img *ngIf="profilePicture" [src]="profilePicture" class="profile-image"
                                    alt="Profile Picture" />
                                <div class="image-overlay">
                                    <i nz-icon nzType="camera" nzTheme="outline"></i>
                                </div>
                            </div>
                            <div class="upload-button-wrapper">
                                <label class="upload-button">
                                    <i nz-icon nzType="upload" nzTheme="outline"></i>
                                    <span>Upload Photo</span>
                                    <input type="file" id="profilePhoto" name="data" style="visibility: hidden" #f_input
                                        (change)="handleFileInputChange(f_input.files)" required
                                        accept=".jpg, .png, .svg" />
                                </label>
                                <p class="upload-hint">JPG, PNG, SVG up to 5MB</p>
                            </div>
                            <div *ngIf="form.get('profilePicture')?.errors && form.get('profilePicture')?.touched"
                                class="custom-error-message">
                                <span *ngIf="form.get('profilePicture')?.errors?.['required']">
                                    Profile Photo is required
                                </span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Basic Personal Information -->
                <div class="form-section">
                    <div class="section-header-wrapper">
                        <div class="header-icon">
                            <i nz-icon nzType="idcard" nzTheme="outline"></i>
                        </div>
                        <div class="header-content">
                            <h3 class="section-title">Basic Personal Information</h3>
                            <p class="section-subtitle">Please provide your complete personal details</p>
                        </div>
                    </div>

                    <div class="form-grid">
                        <!-- Row 1: First Name, Father Name, Grand Father Name -->
                        <div class="form-row">
                            <div class="form-field">
                                <nz-form-item>
                                    <nz-form-control [nzValidateStatus]="''">
                                        <div class="floating-label-container">
                                            <input nz-input formControlName="firstName"
                                                placeholder=" " id="firstName" />
                                            <label for="firstName" class="floating-label">
                                                <i nz-icon nzType="user" nzTheme="outline"></i>
                                                First Name <span class="required">*</span>
                                            </label>
                                        </div>
                                        <div *ngIf="firstName?.errors && firstName?.touched"
                                            class="custom-error-message">
                                            <span *ngIf="firstName?.errors?.['invalidEnglish']">
                                                {{firstName?.errors?.['invalidEnglish']?.message}}
                                            </span>
                                            <span *ngIf="firstName?.errors?.['required']">
                                                First Name is required
                                            </span>
                                        </div>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div class="form-field">
                                <nz-form-item>
                                    <nz-form-control [nzValidateStatus]="''">
                                        <div class="floating-label-container">
                                            <input nz-input formControlName="fatherName"
                                                placeholder=" " id="fatherName" />
                                            <label for="fatherName" class="floating-label">
                                                <i nz-icon nzType="user" nzTheme="outline"></i>
                                                Father Name <span class="required">*</span>
                                            </label>
                                        </div>
                                        <div *ngIf="fatherName?.errors && fatherName?.touched"
                                            class="custom-error-message">
                                            <span *ngIf="fatherName?.errors?.['invalidEnglish']">
                                                {{fatherName?.errors?.['invalidEnglish']?.message}}
                                            </span>
                                            <span *ngIf="fatherName?.errors?.['required']">
                                                Father Name is required
                                            </span>
                                        </div>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div class="form-field">
                                <nz-form-item>
                                    <nz-form-control [nzValidateStatus]="''">
                                        <div class="floating-label-container">
                                            <input nz-input formControlName="grandFatherName"
                                                placeholder=" " id="grandFatherName" />
                                            <label for="grandFatherName" class="floating-label">
                                                <i nz-icon nzType="user" nzTheme="outline"></i>
                                                Grand Father Name <span class="required">*</span>
                                            </label>
                                        </div>
                                        <div *ngIf="grandFatherName?.errors && grandFatherName?.touched"
                                            class="custom-error-message">
                                            <span *ngIf="grandFatherName?.errors?.['invalidEnglish']">
                                                {{grandFatherName?.errors?.['invalidEnglish']?.message}}
                                            </span>
                                            <span *ngIf="grandFatherName?.errors?.['required']">
                                                Grand Father Name is required
                                            </span>
                                        </div>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                        </div>

                        <!-- Row 2: First Name(Amharic), Father Name(Amharic), Grand Father Name(Amharic) -->
                        <!-- <div class="form-row">
                            <div class="form-field">
                                <nz-form-item>
                                    <nz-form-control [nzValidateStatus]="''">
                                        <div class="floating-label-container">
                                            <input nz-input formControlName="firstNameInAmh"
                                                placeholder=" " id="firstNameInAmh" />
                                            <label for="firstNameInAmh" class="floating-label">
                                                <i nz-icon nzType="user" nzTheme="outline"></i>
                                                First Name(Amharic)
                                            </label>
                                        </div>
                                        <div *ngIf="firstNameInAmh?.errors && firstNameInAmh?.touched"
                                            class="custom-error-message">
                                            <span *ngIf="firstNameInAmh?.errors?.['invalidName']">
                                                {{firstNameInAmh?.errors?.['invalidName']?.message}}
                                            </span>
                                        </div>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div class="form-field">
                                <nz-form-item>
                                    <nz-form-control [nzValidateStatus]="''">
                                        <div class="floating-label-container">
                                            <input nz-input formControlName="fatherNameInAmh"
                                                placeholder=" " id="fatherNameInAmh" />
                                            <label for="fatherNameInAmh" class="floating-label">
                                                <i nz-icon nzType="user" nzTheme="outline"></i>
                                                Father Name(Amharic)
                                            </label>
                                        </div>
                                        <div *ngIf="fatherNameInAmh?.errors && fatherNameInAmh?.touched"
                                            class="custom-error-message">
                                            <span *ngIf="fatherNameInAmh?.errors?.['invalidName']">
                                                {{fatherNameInAmh?.errors?.['invalidName']?.message}}
                                            </span>
                                        </div>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div class="form-field">
                                <nz-form-item>
                                    <nz-form-control [nzValidateStatus]="''">
                                        <div class="floating-label-container">
                                            <input nz-input formControlName="grandFatherNameInAmh"
                                                placeholder=" " id="grandFatherNameInAmh" />
                                            <label for="grandFatherNameInAmh" class="floating-label">
                                                <i nz-icon nzType="user" nzTheme="outline"></i>
                                                Grand Father Name(Amharic)
                                            </label>
                                        </div>
                                        <div *ngIf="grandFatherNameInAmh?.errors && grandFatherNameInAmh?.touched"
                                            class="custom-error-message">
                                            <span *ngIf="grandFatherNameInAmh?.errors?.['invalidName']">
                                                {{grandFatherNameInAmh?.errors?.['invalidName']?.message}}
                                            </span>
                                        </div>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                        </div> -->

                        <!-- Row 3: Mother Name, Sir Name, Gender -->
                        <div class="form-row">
                            <div class="form-field">
                                <nz-form-item>
                                    <nz-form-control [nzValidateStatus]="''">
                                        <div class="floating-label-container">
                                            <input nz-input formControlName="motherName"
                                                placeholder=" " id="motherName" />
                                            <label for="motherName" class="floating-label">
                                                <i nz-icon nzType="user" nzTheme="outline"></i>
                                                Mother Name <span class="required">*</span>
                                            </label>
                                        </div>
                                        <div *ngIf="motherName?.errors && motherName?.touched"
                                            class="custom-error-message">
                                            <span *ngIf="motherName?.errors?.['invalidChars']">
                                                {{motherName?.errors?.['invalidChars']?.message}}
                                            </span>
                                            <span *ngIf="motherName?.errors?.['required']">
                                                Mother Name is required
                                            </span>
                                        </div>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div class="form-field">
                                <nz-form-item>
                                    <nz-form-control [nzValidateStatus]="''">
                                        <div class="floating-label-container">
                                            <input nz-input formControlName="sirName" placeholder=" " id="sirName" />
                                            <label for="sirName" class="floating-label">
                                                <i nz-icon nzType="user" nzTheme="outline"></i>
                                                Sir Name
                                            </label>
                                        </div>
                                        <div *ngIf="sirName?.errors && sirName?.touched" class="custom-error-message">
                                            <span *ngIf="sirName?.errors?.['alphabetsOnly']">
                                                {{sirName?.errors?.['alphabetsOnly']?.message}}
                                            </span>
                                        </div>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div class="form-field">
                                <nz-form-item>
                                    <nz-form-control [nzValidateStatus]="''">
                                        <div class="floating-label-container">
                                            <nz-select formControlName="gender" nzPlaceHolder="Select your gender">
                                                <nz-option nzValue="Male" nzLabel="Male"></nz-option>
                                                <nz-option nzValue="Female" nzLabel="Female"></nz-option>
                                            </nz-select>
                                            <label class="floating-label">
                                                <i nz-icon nzType="user" nzTheme="outline"></i>
                                                Gender <span class="required">*</span>
                                            </label>
                                        </div>
                                        <div *ngIf="gender?.errors && gender?.touched" class="custom-error-message">
                                            <span *ngIf="gender?.errors?.['required']">
                                                Gender is required
                                            </span>
                                        </div>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                        </div>

                        <!-- Row 4: Birth Date, Birth Place, Nationality -->
                        <div class="form-row">
                            <div class="form-field">
                                <nz-form-item>
                                    <nz-form-control [nzValidateStatus]="''">
                                        <nz-date-picker formControlName="birthDate" [nzDisabledDate]="disabledDate"
                                            [nzInputReadOnly]="false" [nzAllowClear]="true"
                                            nzPlaceHolder=" "
                                            class="date-picker-with-floating-label"
                                            style="width: 100%">
                                        </nz-date-picker>
                                        <label class="floating-label">
                                            <i nz-icon nzType="calendar" nzTheme="outline"></i>
                                            Birth Date <span class="required">*</span>
                                        </label>
                                        <div *ngIf="birthDate?.errors && birthDate?.touched"
                                            class="custom-error-message">
                                            <span *ngIf="birthDate?.errors?.['required']">
                                                Birth Date is required
                                            </span>
                                            <span *ngIf="birthDate?.errors?.['invalidDate']">
                                                {{birthDate?.errors?.['invalidDate']?.message}}
                                            </span>
                                            <span *ngIf="birthDate?.errors?.['minAge']">
                                                {{birthDate?.errors?.['minAge']?.message}}
                                            </span>
                                            <span *ngIf="birthDate?.errors?.['futureDate']">
                                                {{birthDate?.errors?.['futureDate']?.message}}
                                            </span>
                                        </div>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div class="form-field">
                                <nz-form-item>
                                    <nz-form-control [nzValidateStatus]="''">
                                        <input nz-input formControlName="birthPlace"
                                            placeholder=" " id="birthPlace" 
                                            class="input-with-floating-label" />
                                        <label for="birthPlace" class="floating-label">
                                            <i nz-icon nzType="environment" nzTheme="outline"></i>
                                            Birth Place <span class="required">*</span>
                                        </label>
                                        <div *ngIf="birthPlace?.errors && birthPlace?.touched"
                                            class="custom-error-message">
                                            <span *ngIf="birthPlace?.errors?.['invalidChars']">
                                                {{birthPlace?.errors?.['invalidChars']?.message}}
                                            </span>
                                            <span *ngIf="birthPlace?.errors?.['required']">
                                                Birth Place is required
                                            </span>
                                        </div>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div class="form-field">
                                <nz-form-item>
                                    <nz-form-control [nzValidateStatus]="''">
                                        <nz-select formControlName="nationality" nzPlaceHolder=" "
                                            [nzShowSearch]="true" [nzShowArrow]="true"
                                            [nzFilterOption]="filterNationality"
                                            class="select-with-floating-label">
                                            <nz-option *ngFor="let country of countries" [nzValue]="country.nationality"
                                                [nzLabel]="country.name">
                                                <div class="country-option">
                                                    <span class="flag-emoji">{{country.flag}}</span>
                                                    <span class="country-name">{{country.name}}</span>
                                                    <span class="nationality-name">({{country.nationality}})</span>
                                                </div>
                                            </nz-option>
                                        </nz-select>
                                        <label class="floating-label">
                                            <i nz-icon nzType="global" nzTheme="outline"></i>
                                            Nationality <span class="required">*</span>
                                        </label>
                                        <div *ngIf="nationality?.errors && nationality?.touched"
                                            class="custom-error-message">
                                            <span *ngIf="nationality?.errors?.['required']">
                                                Nationality is required
                                            </span>
                                        </div>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-field">
                                <nz-form-item>
                                    <nz-form-control [nzValidateStatus]="''">
                                        <div class="floating-label-container">
                                            <input nz-input formControlName="nationalExaminationId"
                                                placeholder=" " id="nationalExaminationId" />
                                            <label for="nationalExaminationId" class="floating-label">
                                                <i nz-icon nzType="environment" nzTheme="outline"></i>
                                                National Examination ID 
                                            </label>
                                        </div>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div class="form-field">
                                <nz-form-item>
                                    <nz-form-control [nzValidateStatus]="''">
                                        <div class="floating-label-container">
                                            <input nz-input formControlName="nationalId"
                                                placeholder=" " id="nationalId" />
                                            <label for="nationalId" class="floating-label">
                                                <i nz-icon nzType="environment" nzTheme="outline"></i>
                                                National Id
                                            </label>
                                        </div>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                        </div>
                        <!-- <div class="form-row">
                            <div class="form-field">
                                <nz-form-label>
                                    <i nz-icon nzType="environment" nzTheme="outline"></i>
                                    Tax Identification Number (TIN)
                                </nz-form-label>
                                <nz-form-control [nzValidateStatus]="''">
                                    <input nz-input formControlName="tin"
                                        placeholder="Enter your tax identification number" />
                                </nz-form-control>
                            </div>
                            <div class="form-field"></div>
                        </div> -->
                    </div>
                </div>

                <!-- Contact Information -->
                <div class="form-section">
                    <div class="section-header-wrapper">
                        <div class="header-icon">
                            <i nz-icon nzType="phone" nzTheme="outline"></i>
                        </div>
                        <div class="header-content">
                            <h3 class="section-title">Contact Information</h3>
                            <p class="section-subtitle">Provide your contact details for communication</p>
                        </div>
                    </div>

                    <div class="form-grid">
                        <!-- Row 1: Cell Phone, Office Phone, Home Phone -->
                        <div class="form-row">
                            <div class="form-field">
                                <nz-form-item>
                                    <nz-form-control [nzValidateStatus]="''">
                                        <input nz-input formControlName="mobile"
                                            placeholder=" " id="mobile" 
                                            class="input-with-floating-label" />
                                        <label for="mobile" class="floating-label">
                                            <i nz-icon nzType="mobile" nzTheme="outline"></i>
                                            Cell Phone <span class="required">*</span>
                                        </label>
                                        <div *ngIf="mobile?.errors && mobile?.touched" class="custom-error-message">
                                            <span *ngIf="mobile?.errors?.['invalidPhoneNumber']">
                                                {{mobile?.errors?.['invalidPhoneNumber']?.message}}
                                            </span>
                                            <span *ngIf="mobile?.errors?.['required']">
                                                Mobile is required
                                            </span>
                                        </div>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div class="form-field">
                                <nz-form-item>
                                    <nz-form-control [nzValidateStatus]="''">
                                        <input nz-input formControlName="telephonOffice"
                                            placeholder=" " id="telephonOffice" 
                                            class="input-with-floating-label" />
                                        <label for="telephonOffice" class="floating-label">
                                            <i nz-icon nzType="phone" nzTheme="outline"></i>
                                            Office Phone
                                        </label>
                                        <div *ngIf="telephonOffice?.errors && telephonOffice?.touched" class="custom-error-message">
                                            <span *ngIf="telephonOffice?.errors?.['invalidPhoneNumber']">
                                                {{telephonOffice?.errors?.['invalidPhoneNumber']?.message}}
                                            </span>
                                        </div>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div class="form-field">
                                <nz-form-item>
                                    <nz-form-control [nzValidateStatus]="''">
                                        <input nz-input formControlName="telephonHome"
                                            placeholder=" " id="telephonHome" 
                                            class="input-with-floating-label" />
                                        <label for="telephonHome" class="floating-label">
                                            <i nz-icon nzType="phone" nzTheme="outline"></i>
                                            Home Phone
                                        </label>
                                        <div *ngIf="telephonHome?.errors && telephonHome?.touched" class="custom-error-message">
                                            <span *ngIf="telephonHome?.errors?.['invalidPhoneNumber']">
                                                {{telephonHome?.errors?.['invalidPhoneNumber']?.message}}
                                            </span>
                                        </div>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                        </div>

                        <!-- Row 2: Email, Postal Address, Area Type -->
                        <div class="form-row">
                            <div class="form-field">
                                <nz-form-item>
                                    <nz-form-control [nzValidateStatus]="''">
                                        <input nz-input formControlName="emailAddress"
                                            placeholder=" " id="emailAddress" 
                                            class="input-with-floating-label" />
                                        <label for="emailAddress" class="floating-label">
                                            <i nz-icon nzType="mail" nzTheme="outline"></i>
                                            Email <span class="required">*</span>
                                        </label>
                                        <div *ngIf="emailAddress?.errors && emailAddress?.touched"
                                            class="custom-error-message">
                                            <span *ngIf="emailAddress?.errors?.['invalidEmail']">
                                                {{emailAddress?.errors?.['invalidEmail']?.message}}
                                            </span>
                                            <span *ngIf="emailAddress?.errors?.['required']">
                                                Email is required
                                            </span>
                                        </div>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div class="form-field">
                                <nz-form-item>
                                    <nz-form-control [nzValidateStatus]="''">
                                        <input nz-input formControlName="postalAddress"
                                            placeholder=" " id="postalAddress" 
                                            class="input-with-floating-label" />
                                        <label for="postalAddress" class="floating-label">
                                            <i nz-icon nzType="home" nzTheme="outline"></i>
                                            Postal Address
                                        </label>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div class="form-field">
                                <nz-form-item>
                                    <nz-form-control [nzValidateStatus]="''">
                                        <input nz-input formControlName="areaType" 
                                            placeholder=" " id="areaType" 
                                            class="input-with-floating-label" />
                                        <label for="areaType" class="floating-label">
                                            <i nz-icon nzType="home" nzTheme="outline"></i>
                                            Area Type
                                        </label>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Address Information -->
                <div class="form-section">
                    <div class="section-header-wrapper">
                        <div class="header-icon">
                            <i nz-icon nzType="environment" nzTheme="outline"></i>
                        </div>
                        <div class="header-content">
                            <h3 class="section-title">Address Information</h3>
                            <p class="section-subtitle">Provide your current residential address details</p>
                        </div>
                    </div>

                    <div class="form-grid">
                        <!-- Row 1: Region, City, Sub City -->
                        <div class="form-row">
                            <div class="form-field">
                                <nz-form-item>
                                    <nz-form-control [nzValidateStatus]="''">
                                        <nz-select formControlName="region" nzPlaceHolder=" "
                                            class="select-with-floating-label">
                                            <nz-option nzValue="Addis Ababa" nzLabel="Addis Ababa"></nz-option>
                                            <nz-option nzValue="Afar Region" nzLabel="Afar Region"></nz-option>
                                            <nz-option nzValue="Amhara Region" nzLabel="Amhara Region"></nz-option>
                                            <nz-option nzValue="Benishangul-Gumuz Region"
                                                nzLabel="Benishangul-Gumuz Region"></nz-option>
                                            <nz-option nzValue="Central Ethiopia Region"
                                                nzLabel="Central Ethiopia Region"></nz-option>
                                            <nz-option nzValue="Dire Dawa" nzLabel="Dire Dawa"></nz-option>
                                            <nz-option nzValue="Gambela Region" nzLabel="Gambela Region"></nz-option>
                                            <nz-option nzValue="Harari Region" nzLabel="Harari Region"></nz-option>
                                            <nz-option nzValue="Oromia Region" nzLabel="Oromia Region"></nz-option>
                                            <nz-option nzValue="Sidama Region" nzLabel="Sidama Region"></nz-option>
                                            <nz-option nzValue="Somali Region" nzLabel="Somali Region"></nz-option>
                                            <nz-option nzValue="South Ethiopia Region"
                                                nzLabel="South Ethiopia Region"></nz-option>
                                            <nz-option nzValue="Southwest Ethiopia Peoples' Region"
                                                nzLabel="Southwest Ethiopia Peoples' Region"></nz-option>
                                            <nz-option nzValue="Tigray Region" nzLabel="Tigray Region"></nz-option>
                                        </nz-select>
                                        <label class="floating-label">
                                            <i nz-icon nzType="environment" nzTheme="outline"></i>
                                            Region <span class="required">*</span>
                                        </label>
                                        <div *ngIf="region?.errors && region?.touched" class="custom-error-message">
                                            <span *ngIf="region?.errors?.['required']">
                                                Region is required
                                            </span>
                                        </div>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div class="form-field">
                                <nz-form-item>
                                    <nz-form-control [nzValidateStatus]="''">
                                        <input nz-input formControlName="city" placeholder=" " id="city" 
                                            class="input-with-floating-label" />
                                        <label for="city" class="floating-label">
                                            <i nz-icon nzType="bank" nzTheme="outline"></i>
                                            City
                                        </label>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            
                        </div>

                        <!-- Row 2: Woreda, Kebele, House Number -->
                        <div class="form-row">
                            <div class="form-field">
                                <nz-form-item>
                                    <nz-form-control [nzValidateStatus]="''">
                                        <input nz-input formControlName="woreda" placeholder=" " id="woreda" 
                                            class="input-with-floating-label" />
                                        <label for="woreda" class="floating-label">
                                            <i nz-icon nzType="cluster" nzTheme="outline"></i>
                                            Woreda
                                        </label>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div class="form-field">
                                <nz-form-item>
                                    <nz-form-control [nzValidateStatus]="''">
                                        <input nz-input formControlName="kebele" placeholder=" " id="kebele" 
                                            class="input-with-floating-label" />
                                        <label for="kebele" class="floating-label">
                                            <i nz-icon nzType="home" nzTheme="outline"></i>
                                            Kebele
                                        </label>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            
                        </div>
                    </div>
                </div>

                <!-- Debug section -->
                <!-- <div style="margin-top: 20px; padding: 16px; background: #f5f5f5; border-radius: 8px;">
                    <h4>Debug Information</h4>
                    <button nz-button nzType="primary" (click)="testValidation()">Test Validation</button>
                    <div style="margin-top: 10px;">
                        <strong>Form Valid:</strong> {{form?.valid}}<br>
                        <strong>First Name Errors:</strong> {{firstName?.errors | json}}<br>
                        <strong>First Name In Amh Errors:</strong> {{firstNameInAmh?.errors | json}}
                    </div>
                </div> -->
            </div>
        </form>
    </div>

    <div tabContent="contactPerson">
        <app-manage-contact-person-form></app-manage-contact-person-form>
    </div>

    <div tabContent="education">
        <app-manage-education></app-manage-education>
    </div>

    <div tabContent="workExperience">
        <app-manage-work-experience></app-manage-work-experience>
    </div>

    <div tabContent="academicProgram">
        <app-manage-student-program-requester></app-manage-student-program-requester>
    </div>
    <div tabContent="applicationFee">
        <app-application-fee 
            [applicantId]="id" 
            [isTabActive]="selectedTabIndex === 5"
            (paymentStatusChange)="onPaymentStatusChange($event)">
        </app-application-fee>
    </div>
    <div tabContent="files">
        <app-school-with-student-agreement (formValidityChange)="onAgreementFormValidityChange($event)"
            (formValueChange)="onAgreementFormValueChange($event)"></app-school-with-student-agreement>
    </div>

</app-admission-tabs>