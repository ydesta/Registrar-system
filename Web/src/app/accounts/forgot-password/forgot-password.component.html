<app-auth-header></app-auth-header>

<div class="forgot-password-container">
  <div class="forgot-password-card">
    <div class="logo-section">
      <img src="../../../assets/images/logo.png" alt="HiLCoE Logo" class="logo" (click)="goToHome()" style="cursor: pointer;">
      <h2>Forgot Password</h2>
      <p>Enter your email address to reset your password</p>
    </div>

    <!-- Email Sent Success State -->
    <div *ngIf="emailSent" class="success-state">
      <div class="success-icon">
        <i nz-icon nzType="check-circle" nzTheme="twotone" nzTwotoneColor="#52c41a"></i>
      </div>
      <h3>Check Your Email</h3>
      <p>We've sent password reset instructions to:</p>
      <div class="email-display">{{ emailAddress }}</div>
      <p class="instructions">
        Please check your email and follow the link to reset your password. 
        If you don't see the email, check your spam folder.
      </p>
      
      <div class="success-actions">
        <button 
          nz-button 
          class="resend-button" 
          [nzType]="'default'"
          (click)="resendEmail()">
          Resend Email
        </button>
        <button 
          nz-button 
          class="back-to-login-button" 
          [nzType]="'primary'"
          (click)="goToLogin()">
          Back to Login
        </button>
      </div>
    </div>

    <!-- Forgot Password Form -->
    <form *ngIf="!emailSent" nz-form [formGroup]="forgotPasswordForm" class="forgot-password-form" (ngSubmit)="submitForm()">
      <nz-form-item>
        <nz-form-control nzErrorTip="Please input a valid email address!">
          <nz-input-group nzPrefixIcon="mail">
            <input 
              type="email" 
              nz-input 
              formControlName="email" 
              placeholder="Enter your email address" />
          </nz-input-group>
        </nz-form-control>
      </nz-form-item>

      <div class="form-info">
        <p>
          <i nz-icon nzType="info-circle" nzTheme="outline"></i>
          Enter the email address associated with your account and we'll send you a link to reset your password.
        </p>
      </div>

      <div class="forgot-password-actions">
        <button 
          nz-button 
          class="submit-button" 
          [nzType]="'primary'" 
          [nzLoading]="isLoading"
          [disabled]="!forgotPasswordForm.valid || isLoading">
          {{ isLoading ? 'Sending...' : 'Send Reset Link' }}
        </button>
      </div>
    </form>

    <!-- Navigation Links -->
    <div class="navigation-links">
      <div class="link-group">
        <span>Remember your password? </span>
        <a (click)="goToLogin()">Sign in</a>
      </div>
      <div class="link-group">
        <span>Don't have an account? </span>
        <a (click)="goToRegister()">Sign up</a>
      </div>
    </div>
  </div>
</div> 