<div class="content-container">
  <!-- Header Section -->
  <div class="header-section">
    <div class="header-content">
      <div class="page-title">
        <h2 class="title-text">Curricula</h2>
        <p class="subtitle-text">View, search, and manage all curricula</p>
      </div>
      <div class="header-actions">
        <div class="search-section">
          <nz-input-group [nzSuffix]="suffixIconSearch">
            <input type="text" nz-input placeholder="Search by code, programme, or status..." [(ngModel)]="searchKey" (ngModelChange)="onSearch()"/>
          </nz-input-group>
          <ng-template #suffixIconSearch>
            <span nz-icon nzType="search"></span>
          </ng-template>
        </div>
        <button nz-button nzType="primary" routerLink="../curricula/add-curriculum/null" class="add-btn">
          <span nz-icon nzType="plus" nzTheme="outline"></span>
          Add Curriculum
        </button>
        <button nz-button nzType="default" (click)="exportCurriculum()" class="export-btn">
          <span nz-icon nzType="file-excel" nzTheme="outline"></span>
          Export
        </button>
        <button nz-button nzType="default" ngxPrint [printSectionId]="'print-section'" [printTitle]="'Curricula List'" class="print-btn">
          <span nz-icon nzType="printer" nzTheme="outline"></span>
          Print
        </button>
      </div>
    </div>
  </div>

  <!-- Table Card Container -->
  <div class="table-card">
    <div id="print-section">
      <nz-table #basicTable 
                [nzData]="curriculums" 
                nzBordered
                [nzPageSize]="pageSize"
                [nzPageSizeOptions]="pageSizeOption"
                [nzShowSizeChanger]="true"
                [nzTotal]="totalRecord"
                [nzPageIndex]="pageindex"
                (nzPageIndexChange)="paginatedIndexEvent($event)"
                (nzPageSizeChange)="paginatedSizeEvent($event)"
                [nzFrontPagination]="false"
                [nzShowTotal]="rangeTemplate"
                [nzLoading]="tbLoading"
                [nzNoResult]="emptyTpl"
                class="curricula-table">
        <ng-template #rangeTemplate let-range="range" let-total>
          <span style="color: #6b7280; font-weight: 500;">
            {{ range[0] }}-{{ range[1] }} of {{ total }} curricula
          </span>
        </ng-template>
        <thead>
          <tr>
            <th style="min-width: 60px;">S/N</th>
            <th style="min-width: 140px;" 
                [nzSortOrder]="listOfColumns[0].sortOrder"
                [nzSortFn]="listOfColumns[0].sortFn" 
                [nzSortDirections]="listOfColumns[0].sortDirections"
                [nzFilterMultiple]="listOfColumns[0].filterMultiple" 
                [nzFilters]="listOfColumns[0].listOfFilter" 
                [nzFilterFn]="listOfColumns[0].filterFn">
              {{ listOfColumns[0].name }}
            </th>
            <th style="min-width: 180px;" 
                [nzSortOrder]="listOfColumns[1].sortOrder"
                [nzSortFn]="listOfColumns[1].sortFn" 
                [nzSortDirections]="listOfColumns[1].sortDirections"
                [nzFilterMultiple]="listOfColumns[1].filterMultiple" 
                [nzFilters]="listOfColumns[1].listOfFilter" 
                [nzFilterFn]="listOfColumns[1].filterFn">
              {{ listOfColumns[1].name }}
            </th>
            <th style="min-width: 160px;" 
                [nzSortOrder]="listOfColumns[2].sortOrder"
                [nzSortFn]="listOfColumns[2].sortFn" 
                [nzSortDirections]="listOfColumns[2].sortDirections"
                [nzFilterMultiple]="listOfColumns[2].filterMultiple" 
                [nzFilters]="listOfColumns[2].listOfFilter" 
                [nzFilterFn]="listOfColumns[2].filterFn">
              {{ listOfColumns[2].name }}
            </th>
            <th style="min-width: 140px;" 
                [nzSortOrder]="listOfColumns[3].sortOrder"
                [nzSortFn]="listOfColumns[3].sortFn" 
                [nzSortDirections]="listOfColumns[3].sortDirections"
                [nzFilterMultiple]="listOfColumns[3].filterMultiple" 
                [nzFilters]="listOfColumns[3].listOfFilter" 
                [nzFilterFn]="listOfColumns[3].filterFn">
              {{ listOfColumns[3].name }}
            </th>
            <th style="min-width: 140px;" 
                [nzSortOrder]="listOfColumns[4].sortOrder"
                [nzSortFn]="listOfColumns[4].sortFn" 
                [nzSortDirections]="listOfColumns[4].sortDirections"
                [nzFilterMultiple]="listOfColumns[4].filterMultiple" 
                [nzFilters]="listOfColumns[4].listOfFilter" 
                [nzFilterFn]="listOfColumns[4].filterFn">
              {{ listOfColumns[4].name }}
            </th>
            <th style="min-width: 140px;" 
                [nzSortOrder]="listOfColumns[5].sortOrder"
                [nzSortFn]="listOfColumns[5].sortFn" 
                [nzSortDirections]="listOfColumns[5].sortDirections"
                [nzFilterMultiple]="listOfColumns[5].filterMultiple" 
                [nzFilters]="listOfColumns[5].listOfFilter" 
                [nzFilterFn]="listOfColumns[5].filterFn">
              {{ listOfColumns[5].name }}
            </th>
            <th style="min-width: 120px;" 
                [nzSortOrder]="listOfColumns[6].sortOrder"
                [nzSortFn]="listOfColumns[6].sortFn" 
                [nzSortDirections]="listOfColumns[6].sortDirections"
                [nzFilterMultiple]="listOfColumns[6].filterMultiple" 
                [nzFilters]="listOfColumns[6].listOfFilter" 
                [nzFilterFn]="listOfColumns[6].filterFn">
              {{ listOfColumns[6].name }}
            </th>
            <th class="sticky-action" style="min-width: 120px;">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let data of basicTable.data; let i = index">
            <td><span class="sn-badge">{{ (pageindex - 1) * pageSize + i + 1 }}</span></td>
            <td>{{ data.curriculumCode }}</td>
            <td>{{ data.acadamicProgramme.acadamicProgrammeTitle }}</td>
            <td>{{ data.minimumCumlativGPA }}</td>
            <td>{{ data.minimumMajorGPA }}</td>
            <td>{{ data.minTotalCreditHours }}</td>
            <td>{{ data.passingGrade }}</td>
            <td [ngClass]="cellStyles(data.status)">{{ getCurriculumStatusDescription(data.status) }}</td>
            <td class="sticky-action" [class.sticky-action-even]="i % 2 === 1">
              <button nz-button 
                      nz-dropdown 
                      [nzDropdownMenu]="menu" 
                      nzPlacement="bottomRight"
                      nzTrigger="click"
                      class="action-button">
                <span nz-icon nzType="more" nzTheme="outline"></span>
              </button>
              <nz-dropdown-menu #menu="nzDropdownMenu">
                <ul nz-menu>
                  <li nz-menu-item>
                    <button nz-button nzType="default" class="action-item" (click)="goToCurriculumQuadrantBreakdown(data)">
                      <span nz-icon nzType="plus" nzTheme="outline"></span>
                      Add Quadrants Breakdown
                    </button>
                  </li>
                  <li nz-menu-item>
                    <button nz-button nzType="default" class="action-item" (click)="goToQuadrantBreakdown(data)">
                      <span nz-icon nzType="eye" nzTheme="outline"></span>
                      Show Quadrants Breakdown
                    </button>
                  </li>
                  <li nz-menu-item>
                    <button nz-button nzType="default" class="action-item" (click)="goToCurriculumTermYearBreakdown(data)">
                      <span nz-icon nzType="plus" nzTheme="outline"></span>
                      Add Term Year Breakdown
                    </button>
                  </li>
                  <li nz-menu-item>
                    <button nz-button nzType="default" class="action-item" (click)="goToCurriculumBreakdown(data)">
                      <span nz-icon nzType="eye" nzTheme="outline"></span>
                      Show Term Year Breakdown
                    </button>
                  </li>
                  <li nz-menu-item>
                    <button nz-button nzType="default" class="action-item" (click)="openModal(data.id)">
                      <span nz-icon nzType="eye" nzTheme="outline"></span>
                      Show Status Tracking
                    </button>
                  </li>
                  <li nz-menu-item>
                    <a routerLink="../curricula/add-curriculum/{{ data.id }}" class="action-item">
                      <span nz-icon nzType="edit" nzTheme="outline"></span>
                      Edit Curriculum
                    </a>
                  </li>
                  <li nz-menu-item>
                    <button nz-button nzType="default" class="action-item delete-action" (click)="showDeleteConfirm(data.id)">
                      <span nz-icon nzType="delete" nzTheme="outline"></span>
                      Delete Curriculum
                    </button>
                  </li>
                </ul>
              </nz-dropdown-menu>
            </td>
          </tr>
        </tbody>
        <ng-template #emptyTpl>
          <div class="no-data">
            <span nz-icon nzType="book" nzTheme="outline"></span>
            <p>No curricula available</p>
          </div>
        </ng-template>
      </nz-table>
    </div>
  </div>
</div>