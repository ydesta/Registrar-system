<div class="content-container">
  <!-- Header Section -->
  <div class="header-section">
    <div class="header-content">
      <div class="page-title">
        <h3 class="title-text">Student Grade Report</h3>
        <p class="subtitle-text">Manage and view student grade information</p>
      </div>
      <div class="header-actions">
        <div class="search-section">
          <nz-input-group nzSearch [nzAddOnAfter]="suffixIconButton">
            <input
              type="text"
              [(ngModel)]="studentId"
              nz-input
              placeholder="Search student ID..."
            />
          </nz-input-group>
          <ng-template #suffixIconButton>
            <button
              (click)="gradeQueryFormSubmit()"
              nz-button
              nzType="primary"
              class="search-btn"
              nzSearch
            >
              <i nz-icon nzType="search"></i>
            </button>
          </ng-template>
        </div>
        <div class="filter-section">
          <form [formGroup]="gradeQueryForm" (ngSubmit)="gradeQueryFormSubmit()">
            <nz-select
              formControlName="termCode"
              nzAllowClear
              nzPlaceHolder="Select Academic Term"
              nzShowSearch
              class="term-select"
            >
              <nz-option
                *ngFor="let ac of academicTerms"
                [nzValue]="ac.academicTermCode"
                [nzLabel]="ac.academicTermCode"
              ></nz-option>
            </nz-select>
            <button class="filter-btn" nz-button nzType="primary">Show</button>
          </form>
        </div>

      </div>
    </div>
  </div>

  <!-- Table Card -->
  <div class="table-card">
    <div id="print-section">
      <nz-table 
        #basicTable 
        [nzData]="studentGrades!" 
        nzBordered
        class="students-table"
        [nzNoResult]="emptyTpl"
      >
        <thead>
          <tr>
            <th class="sn-column">S/N</th>
            <th>Student ID</th>
            <th>Course</th>
            <th>Instructor</th>
            <th>Grade Letter</th>
            <th>Remark</th>
            <th class="action-column">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let data of basicTable.data; let i = index">
            <td class="sn-column">
              <span class="sn-badge">{{ i + 1 }}</span>
            </td>
            <td>{{ data.student.studentId }}</td>
            <td>{{ data.couse.courseTitle }}</td>
            <td>{{ data.staff.firstName + " " + data.staff.lastName }}</td>
            <td>{{ data.gradeLetter }}</td>
            <td>{{ data.remark }}</td>
            <td class="action-column">
              <button 
                nz-button 
                nz-dropdown 
                [nzDropdownMenu]="menu" 
                nzPlacement="bottomLeft"
                class="action-button"
              >
                <i nz-icon nzType="more" nzTheme="outline"></i>
              </button>
              <nz-dropdown-menu #menu="nzDropdownMenu">
                <ul nz-menu>
                  <li>
                    <button nz-button nzType="default" class="action-item detail">
                      <i nz-icon nzType="eye" nzTheme="fill"></i>
                      <span>View Details</span>
                    </button>
                  </li>
                  <li>
                    <a
                      routerLink="../add-student-grade/{{ data.id }}"
                      nz-button
                      nzType="default"
                      class="action-item edit"
                    >
                      <i nz-icon nzType="edit" nzTheme="fill"></i>
                      <span>Edit</span>
                    </a>
                  </li>
                  <li>
                    <button
                      (click)="gradeReport(data.student.studentId)"
                      nz-button
                      nzType="default"
                      class="action-item grade-report"
                    >
                      <i nz-icon nzType="file-text" nzTheme="fill"></i>
                      <span>Grade Report</span>
                    </button>
                  </li>
                  <li>
                    <button
                      nz-button
                      nzDanger
                      nzType="default"
                      class="action-item delete"
                      (click)="showDeleteConfirm(data.id)"
                    >
                      <i nz-icon nzType="delete" nzTheme="fill"></i>
                      <span>Delete</span>
                    </button>
                  </li>
                </ul>
              </nz-dropdown-menu>
            </td>
          </tr>
        </tbody>
        <ng-template #emptyTpl>
          <div class="no-data">
            <i nz-icon nzType="user" nzTheme="outline"></i>
            <p>No student grade records available</p>
          </div>
        </ng-template>
      </nz-table>
    </div>
  </div>
</div>
