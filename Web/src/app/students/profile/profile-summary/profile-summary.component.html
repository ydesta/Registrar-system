<!-- Loading State -->
<div *ngIf="isLoading" class="loading-container">
  <nz-spin nzSize="large"></nz-spin>
  <p>Loading profile information...</p>
</div>

<!-- Error State -->
<div *ngIf="error" class="error-container">
  <nz-alert
    nzType="error"
    [nzMessage]="error"
    nzShowIcon
    class="error-message">
  </nz-alert>
  <button nz-button nzType="primary" (click)="getStudentProfile()">
    <i nz-icon nzType="reload"></i> Retry
  </button>
</div>

<!-- Profile Content -->
<ng-container *ngIf="studentProfile && !isLoading && !error">
  <nz-card nzType="inner" nzTitle="Student Details" class="student-card">
    <div nz-row nzGutter="16">
      <div nz-col nzSpan="8">
        <div class="photo-container">
          <ng-container *ngIf="(isValidProfilePicture(profilePicture) || profilePicture); else defaultAvatar">
            <img class="custom-avatar" [src]="profilePicture" alt="Profile Photo" />
          </ng-container>
          <ng-template #defaultAvatar>
            <div class="default-avatar">
              {{ initials }}
            </div>
          </ng-template>
          <h2 class="student-name">{{ studentProfile.fullName }}</h2>
          <h4 class="student-program">{{ studentProfile.academicProgram }}</h4>
        </div>
      </div>

      <div nz-col nzSpan="10">
        <div class="info-container">
          <div class="info-row">
            <i nz-icon nzType="idcard" class="icon"></i>
            <p><strong>Student Code:</strong> {{ studentProfile.studentCode }}</p>
          </div>

          <div class="info-row">
            <i nz-icon nzType="calendar" class="icon"></i>
            <p><strong>Birth Date:</strong> {{ studentProfile.birthDate | date }}</p>
          </div>

          <div class="info-row">
            <i nz-icon nzType="home" class="icon"></i>
            <p><strong>Birth Place:</strong> {{ studentProfile.birthPlace }}</p>
          </div>
          <div class="info-row">
            <i nz-icon nzType="file-markdown" class="icon"></i>
            <p><strong>Email:</strong> {{ studentProfile.email }}</p>
          </div>
          <div class="info-row">
            <i nz-icon nzType="phone" class="icon"></i>
            <p><strong>Phone Number:</strong> {{studentProfile.phoneNo}}</p>
          </div>
        </div>
      </div>

      <div nz-col nzSpan="6">
        <div class="info-container">
          <div class="info-row">
            <i nz-icon nzType="book" class="icon"></i>
            <p><strong>Batch:</strong> {{ studentProfile.batch }}</p>
          </div>
          <div class="info-row">
            <i nz-icon nzType="bg-colors" class="icon"></i>
            <p><strong>Nationality:</strong> {{studentProfile.nationality}}</p>
          </div>

          <div class="info-row">
            <i nz-icon nzType="team" class="icon"></i>
            <p><strong>Gender:</strong> {{ studentProfile.gender }}</p>
          </div>
          <div class="info-row">
            <i nz-icon nzType="calendar" class="icon"></i>
            <p><strong>Entry Year:</strong> {{ studentProfile.entryYear }}</p>
          </div>

          <!-- <div class="info-row">
            <i nz-icon nzType="check-circle" class="icon"></i>
            <strong>CGPA: {{ getCGPA(studentProfile.studentAcademicYears) | number: '1.2-2' }}</strong>
          </div> -->
        </div>
      </div>
    </div>
  </nz-card>
</ng-container>